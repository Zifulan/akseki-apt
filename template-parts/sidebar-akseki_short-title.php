<?php$current_post_ID = get_the_ID();$current_category_ID = $args['current_category'];$ast_display_output = '';$ast_display_output .= '<div class="sidebar-left-item same-category detail-sidebar">';$ast_display_output .= '<div class="toggler-title text-right btn btn-secondary" data-toggle="collapse" href="#collapseLcpCat" role="button" aria-expanded="false" aria-controls="collapseLcpCat">';$ast_display_output .= '<h3>'.get_cat_name($current_category_ID);$ast_display_output .= '<span class="more-less dashicons dashicons-arrow-down"></span></h3>';$ast_display_output .= category_description($current_category_ID);$ast_display_output .= '</div>';$ast_display_output .= '<div class="collapse" id="collapseLcpCat">';$ast_display_output .= '<ul class="list-group list-group-flush">';$future_post = akseki_get_future_post_in_category($current_category_ID);if(!empty($future_post)){	foreach($future_post as $fpid){		$short = akseki_get_shortname(get_the_title($fpid),$fpid);		$ast_display_output .= '<li class="list-group-item p-1"><em style="color:gray;font-size:.9em;">'.preg_replace('/numberer/','',$short).' (upcoming)</em>';		$sc = akseki_get_sc($fpid);		if(empty($sc)){			$ast_display_output .= ' <span class="badge badge-secondary"><em>&nbsp;tbd.&nbsp;</em></span>';		}else{			$ast_display_output .= ' <span class="badge badge-secondary">' . substr(strip_tags($sc),-4) . '</span>';		}		$ast_display_output .= ' <span class="roundflag">'.akseki_get_the_flag($fpid).'</span></li>';	}}$ast_args = array( 'posts_per_page' => -1, 'category' => $current_category_ID );$ast_posts=get_posts($ast_args);foreach ( $ast_posts as $post ) : setup_postdata( $post );        $ast_display_output .= '<li class="list-group-item p-1'.($current_post_ID == get_the_ID()?" list-group-item-warning":"").'">';						$SM = akseki_get_SM($post->ID);		if(empty($SM)){			$smornot = '<strong>'.akseki_get_shortname($post->post_title, $post->ID, 3).'</strong>';		}else{			$smornot = '<strong>'.$SM.'</strong>';		}		if($current_post_ID == $post->ID){			$ast_display_output .= '<strong>'.$smornot.'</strong>';					}elseif(has_tag("hasnocontent",$post->ID)){			$ast_display_output .= $smornot;		    		}else{			$ast_display_output .= '<a class="related-link" href="'.get_permalink($post->ID).'">'.$smornot.'</a>';		}				$ast_display_output .= ' <span class="badge badge-secondary">' . date('Y', strtotime($post->post_date)) . '</span>';		$ast_display_output .= ' <span class="roundflag">'.akseki_get_the_flag($post->ID).'</span>';        $ast_display_output .= '</li>';endforeach; $ast_display_output .= '</ul>';$ast_display_output .= '</div>';$ast_display_output .= '</div><!--end sidebar-->';wp_reset_postdata();echo($ast_display_output);?>